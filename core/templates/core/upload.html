{% extends "core/territory-info.html" %}
{% load static %}

{% block css %}
{{ block.super }}
<link rel="stylesheet" href="{% static 'core/css/upload.css' %}">
{% endblock %}

{% block title %}
    Upload | Three Generation Images
{% endblock %}

{% block extra-content %}
<div id="main-container">
    <div class="form-container">
        <hr class="my-hr mb-2">
        <div class="form-header">
            <div>
                {% if reupload %}
                <h2>Re-upload Images for Doctor {{ instance_id }}</h2>
                {% else %}
                <h2>Upload Images for Doctor {{ instance_id }}</h2>
                {% endif %}
            </div>
            <div>
                {% if request.user.is_superuser %}
                <a href="{% url 'admin_dashboard' %}" class="my-button">Back</a>
                {% elif reupload %}
                <a href="{% url 'doctor_view' instance_id %}" class="my-button">Back</a>
                {% else %}
                <a href="{% url 'home' %}" class="my-button">Back</a>
                {% endif %}
            </div>
        </div>
        <hr>

        <form method="post" enctype="multipart/form-data">
            {% csrf_token %}

            {% if request.user.is_superuser %}
            <input type="hidden" name="territory" value="{{ territory_id }}">
            {% endif %}

            <div class="form-group">
                <label for="dr_rpl_id">Doctor RPL ID</label>
                <input type="text" id="dr_rpl_id" name="dr_rpl_id" maxlength="10" required
                       value="{{ data.dr_rpl_id|default_if_none:'' }}"
                       {% if reupload %}readonly{% endif %}
                       placeholder="Enter Doctor RPL ID">
            </div>

            <div class="form-group">
                <label for="dr_name">Doctor Name</label>
                <input type="text" id="dr_name" name="dr_name" maxlength="100" required
                       value="{{ data.dr_name|default_if_none:'' }}"
                       {% if reupload %}readonly{% endif %}
                       placeholder="Enter Doctor Name">
            </div>

            <div class="form-group">
                <label for="dr_image">Doctor Image</label>
                <input type="file" id="dr_image" name="dr_image" accept="image/jpeg,image/png"
                       {% if not reupload %}required{% endif %}>
                {% if reupload and data.dr_image %}
                    <a href="{{ data.dr_image.url }}" target="_blank" title="View Full Image">
                        <img src="{{ data.dr_image.url }}" alt="Doctor Image" style="height: 60px; border-radius: 5px; border: 1px solid #ccc;">
                    </a>
                {% endif %}
                <!-- {% if reupload and data.dr_image %}
                    <p>Current: <a href="{{ data.dr_image.url }}" target="_blank">View Image</a></p>
                {% endif %} -->
            </div>

            <div class="form-group">
                <label for="dr_parents_image">Parents Image</label>
                <input type="file" id="dr_parents_image" name="dr_parents_image" accept="image/jpeg,image/png"
                       {% if not reupload %}required{% endif %}>
                {% if reupload and data.dr_parents_image %}
                    <a href="{{ data.dr_parents_image.url }}" target="_blank" title="View Full Image">
                        <img src="{{ data.dr_parents_image.url }}" alt="Doctor Parent Image" style="height: 60px; border-radius: 5px; border: 1px solid #ccc;">
                    </a>
                {% endif %}
                <!-- {% if reupload and data.dr_parents_image %}
                    <p>Current: <a href="{{ data.dr_parents_image.url }}" target="_blank">View Image</a></p>
                {% endif %} -->
            </div>

            <div class="form-group">
                <label for="dr_children_image">Children Image</label>
                <input type="file" id="dr_children_image" name="dr_children_image" accept="image/jpeg,image/png"
                       {% if not reupload %}required{% endif %}>
                {% if reupload and data.dr_children_image %}
                    <a href="{{ data.dr_children_image.url }}" target="_blank" title="View Full Image">
                        <img src="{{ data.dr_children_image.url }}" alt="Doctor Children Image" style="height: 60px; border-radius: 5px; border: 1px solid #ccc;">
                    </a>
                {% endif %}
                <!-- {% if reupload and data.dr_children_image %}
                    <p>Current: <a href="{{ data.dr_children_image.url }}" target="_blank">View Image</a></p>
                {% endif %} -->
            </div>

            <button type="submit" class="bg-blue-500 hover:bg-blue-700 text-white text-center font-sm py-2 px-1 rounded whitespace-nowrap">
                {% if reupload %}Save Changes{% else %}Upload{% endif %}
            </button>
        </form>
    </div>
</div>
{% endblock %}
